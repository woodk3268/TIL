# 세션과 쿠키
- HTTP 프로토콜의 Connectionless, Stateless 라는 특성을 보완하기 위해 쿠키와 세션을 사용함
- 서버와 클라이언트가 통신을 할 때 통신이 연속적으로 이어지지 않고 한 번 통신이 완료되면 끊어짐
- 또한, 로그인과 같은 인증에 대한 상태를 클라이언트에서 유지하지 않기 때문에 사용자가 매번 로그인을 다시 하는 등 불편한 상황이 발생할 수 있음
- 이러한 문제점을 해결하기 위해 세션과 쿠키를 사용

## 1. 쿠키
### 1-1. 정의
- 사용자가 어떤 웹 사이트를 방문할 경우에 그 사이트가 사용하고 있는 서버에서 사용자의 컴퓨터에 저장하는 작은 기록 정보 파일
- HTTP에서 클라이언트의 상태 정보를 클라이언트의 PC에 저장해두었다가 필요시 참조하거나 재사용할 수 있음

### 1-2. 동작 순서
- 클라이언트가 페이지를 요청
- 웹 서버는 쿠키를 생성
- 생성한 쿠키에 정보를 담아 쿠키와 함께 HTTP 화면을 리턴
- 클라이언트는 다시 서버에 요청할 때 해당 쿠키를 함께 전송

## 2. 세션
### 2-1. 정의
- 일정 시간동안 같은 사용자(브라우저)로부터 인입되는 일련의 요청을 하나의 상태로 간주하여, 그 상태를 일정하게 유지시키는 기술
- 여기서 일정 시간은, 방문자가 웹 브라우저를 통해 웹 서버에 접속한 시점으로부터 웹 브라우저를 종료하여 연결을 끝내는 시점을 말함.
- 웹 서버에 접속해 있는 상태를 하나의 단위로 보고 그것을 세션이라 함

### 2-2. 동작 순서
- 클라이언트가 서버에 로그인을 요청함
- 서버는 클라이언트의 로그인 요청의 유효성을 확인하고 세션 ID를 생성하여 저장함
- 서버가 응답할 때 응답 헤더에 세션 ID를 추가하여 응답함
- 클라이언트는 이후 서버에 요청을 보낼 때 전달받은 세션 ID를 쿠키에 요청 헤더로 추가함
- 서버에서는 요청 헤더의 세션 ID 값을 세션 저장소에서 찾아보고 유효한지 확인한 다음 요청을 처리함

## 3. 쿠키와 세션 비교
**공통점**
- 세션도 쿠키를 사용함
- 웹 통신에 있어서 상태/값 유지가 필요한 정보를 저장하기 위해 사용하는 것

**차이점**
- 저장위치 : 세션은 서버에 저장, 쿠키는 개인 PC(로컬)에 저장함
- 생명 주기 : 세션은 브라우저가 종료되면 만료기간에 상관없이 삭제됨. 쿠키는 로컬에 저장되기 때문에 브라우저의 종료 유무와는 관계없음.
- 보안 : 세션이 더 우수함. 쿠키는 클라이언트 로컬에 저장되기 때문에 변질될 우려가 있음. 그러나, 세션은 쿠키를 이용해서 세션 ID만 저장하고 처리 로직은 서버에 존재하기 때문에 비교적 안전함.
- 속도 : 쿠키가 더 우수함

## 4. 정리
- 세션이 쿠키에 비해 보안 수준이 높지만, 사용자가 많아지는 경우에는 소모되는 서버 자원이 상당함
- 자원관리 차원에서 쿠키와 세션을 병행 사용함

참고: 패스트캠퍼스 "Netflix 구독형 멤버십 프로젝트로 배우는 Spring Security" 강의
