# I/O 기본1
- 자바가 가진 데이터를 hello.dat라는 파일에 저장하려면 어떻게 해야할까?
- 자바 프로세스가 가지고 있는 데이터를 밖으로 보내려면 출력 스트림을 사용하면 되고, 반대로 외부 데이터를 자바 프로세스 안으로 가져오려면 입력 스트림을 사용하면 된다.
- 참고로 각 스트림은 단방향으로 흐른다.

## 1. 스트림 시작
### 1-1. 스트림 시작 예제1
```
FileOutputStream 출력 스트림 = new FileOutputStream("temp/hello.dat");
fos.write(65);
fos.write(66);
fos.write(67);
fos.close();

FileInputStream 입력 스트림 = new FileInputStream("temp/hello.dat");
System.out.println(fis.read());
System.out.println(fis.read());
System.out.println(fis.read());
System.out.println(fis.read());
fis.close();
```
**new FileOutputStream("temp/hello.dat")**
- 파일에 데이터를 출력하는 스트림이다.
- 파일이 없으면 파일을 자동으로 만들고, 데이터를 해당 파일에 저장한다.
- 폴더를 만들지는 않기 때문에 폴더는 미리 만들어두어야 한다.

**write()**
- byte 단위로 값을 출력한다.

**new FileInputStream("temp/hello.dat")**
- 파일에서 데이터를 읽어오는 스트림이다.

**read()**
- 파일에서 데이터를 byte 단위로 하나씩 읽어온다.
- 순서대로 65,66,67을 읽어온다.
- 파일의 끝에 도달해서 더는 읽을 내용이 없다면 -1을 반환한다.
   - 파일의 끝(EOF, End of File)

**close()**
- 파일에 접근하는 것은 자바 입장에서 외부 자원을 사용하는 것이다. 자바에서 내부 객체는 자동으로 GC가 되지만 외부 자원은 사용 후 반드시 닫아주어야 한다.

### 1-2. 스트림 시작 예제2
```
FileInputStream 입력 스트림 = new FileInputStream("temp/hello.dat");
int data;
while((data = fis.read()) != -1 ) {
  System.out.println(data);
}
fis.close();
```
- 입력 스트림의 read() 메서드는 파일의 끝에 도달하면 -1을 반환한다. 따라서 -1을 반환할 때까지 반복문을 사용하면 파일의 데이터를 모두 읽을 수 있다.

### 1-3. 스트림 시작 예제3
```
FileOutputStream fos = new FileOutputStream("temp/hello.dat");
byte[] input = {65, 66, 67}
fos.write(input);
fos.close();

FileInputStream fis = new FileInputStream("temp/hello.dat");
byte[] buffer = new byte[10];
int readCount = fis.read(buffer, 0, 10);
System.out.println(Arrays.toString(buffer));
fis.close();
```

**출력 스트림**
- write(byte[]) : byte[]에 원하는 데이터를 담고 write()에 전달하면 해당 데이터를 한 번에 출력할 수 있다.

**입력 스트림**
- read(byte[], offset, length) : byte[]을 미리 만들어두고, 만들어둔 byte[] 에 한번에 데이터를 읽어올 수 있다.
- byte[] : 데이터가 읽혀지는 버퍼
- offset : 데이터 기록되는 byte[]의 인덱스 시작 위치
- length : 읽어올 byte의 최대 길이
- 반환 값 : 버퍼에 읽은 총 바이트 수. 여기서는 3byte를 읽었으므로 3이 반환된다. 스트림의 끝에 도달하여 더이상 데이터가 없는 경우 -1을 반환

### 1-4. 스트림 시작 예제4
```
FileInputStream fis = new FileInputStream("temp/hello.dat");
byte[] readBytes = fis.readAllBytes();
System.out.println(Arrays.toString(readBytes));
fis.close();
```
- readAllBytes()를 사용하면 스트림이 끝날 때까지 모든 데이터를 한번에 읽어올 수 있다.

### 1-5. 부분으로 나누어 읽기 vs 전체 읽기
- read(byte[], offset, length)
  - 스트림의 내용을 부분적으로 읽거나, 읽은 내용을 처리하면서 스트림을 계속해서 읽어야 할 경우에 적합하다.
  - 메모리 사용량을 제어할 수 있다.
  - 파일이나 스트림에서 일정한 크기의 데이터를 반복적으로 읽어야 할 때 유용하다.
- readAllBytes()
  - 한 번의 호출로 모든 데이터를 읽을 수 있어 편리하다.
  - 작은 파일이나 메모리에 모든 내용을 올려서 처리해야 하는 경우에 적합하다.
  - 메모리 사용량을 제어할 수 없다.

## 2. InputStream, OutputStream
- 현대의 컴퓨터는 대부분 byte 단위로 데이터를 주고받는다.
- 이렇게 데이터를 주고 받는 것을 Input/Output 라 한다.
- 자바 내부에 있는 데이터를 외부에 있는 파일에 저장하거나, 네트워크를 통해 전송하거나 콘솔에 출력할 때 모두 byte 단위로 데이터를 주고받는다.
- 만약 파일, 네트워크, 콘솔 각각 데이터를 주고 받는 방식이 다르다면 상당히 불편할 것이다.
- 또한 파일에 저장하던 내용을 네트워크에 전달하거나 콘솔에 출력하도록 변경할 때 너무 많은 코드를 변경해야 할 수 있다.
- 이런 문제를 해결하기 위해 자바는 InputStream, OutputStream이라는 기본 추상 클래스를 제공한다.

### 2-1. 메모리 스트림
```
byte[] input = {1, 2, 3};

ByteArrayOutputStream baos = new ByteArrayOutputStream();
baos.write(input);

ByteArrayInputStream bais = new ByteArrayInputStream(baos.toByteArray());
byte[] bytes = bais.readAllBytes();
System.out.println(Arrays.toString(bytes));
```
### 2-2. 콘솔 스트림
```
printStream printStream = System.out;
byte[] bytes = "Hello!\n".getBytes(UTF_8);
printStream.write(bytes);
printStream.println("Print!");
```
- System.out  이 사실은 PrintStream 이다. 이 스트림은 OutputStream을 상속받는다.
- write(byte[]): OutputStream 부모 클래스가 제공하는 기능이다.
- println(String) : PrintStream 이 자체적으로 제공하는 추가 기능이다.

- 정
