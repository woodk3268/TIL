# 전송 계층
## 1. 전송 계층(Transport Layer) 개요 : IP의 한계와 포트

### 1-1. 신뢰할 수 없는 통신과 비연결형 통신
- **IP (Internet Protocol)**는 네트워크 계층에서 데이터를 목적지까지 전달하는 역할을 하지만, 다음과 같은 기능적 한계가 존재한다.
  - 비신뢰성 (Unreliable)	: IP는 패킷 손실, 중복, 순서 뒤바뀜을 방지하지 않음
  - 비연결성 (Connectionless)	: 데이터를 보내기 전에 연결을 설정하지 않음
  - 데이터 무결성 보장 없음	: 수신자가 받은 데이터가 정확한지 확인 불가
  - 보안 기능 부재	: 암호화나 인증 같은 보안 기능 없음
  - 포트 개념 없음	: IP는 장치까지만 식별하고, 애플리케이션(프로세스) 단위 식별은 못 함
    
- 이러한 한계를 보완하기 위해 **전송계층(Transport Layer)**과 포트가 필요하다.

### 1-2. IP의 한계를 보완하는 전송 계층
- 전송계층은 IP 위에서 동작하면서 프로세스 간 통신을 가능하게 만든다.

**비연결형 / 신뢰할 수 없는 통신: UDP (User Datagram Protocol)**
- 연결 없이 데이터를 전송
- 패킷 손실/순서 보장 없음
- 빠르지만, 신뢰성 떨어짐
- 사용 예시: DNS, 실시간 스트리밍, 게임

**연결형 / 신뢰할 수 있는 통신: TCP (Transmission Control Protocol)**
- 3-way handshake로 연결을 설정
- 데이터 순서 보장, 재전송, 흐름제어, 혼잡제어 등 제공
- 신뢰성 확보됨
- 사용 예시: 웹(HTTP), 이메일(SMTP), 파일전송(FTP)

### 1-3. 응용 계층과의 연결 다리, 포트
- 하나의 컴퓨터 안에 여러 애플리케이션이 실행될 수 있음.
- **포트 번호(0~65535)**를 통해 프로세스를 구분함.
- 예: 웹서버(80), 메일서버(25), FTP(21)


### 1-4. 포트 기반 NAT (Network Address Translation)
- 공유기(라우터)가 내부 IP ↔ 외부 IP를 변환하는 기술
- 사설 IP 주소를 가진 장치들이 하나의 공인 IP로 인터넷 통신할 수 있게 해줌
- 보안성 증가, IP 부족 문제 해결

✅ 5. NAPT (Network Address Port Translation)
NAT의 확장형. IP뿐만 아니라 포트 번호까지 변환하여 다수의 내부 호스트가 하나의 공인 IP를 공유 가능하게 함.

▶ 왜 필요한가?
NAT는 포트 변환 없이 단순 IP 매핑만 하므로, 동시 다중 연결에 제약이 있음

NAPT는 (공인IP, 포트) 조합을 통해 많은 내부 장치의 연결을 동시에 처리

▶ 예시
내부 주소	변환된 외부 주소
192.168.0.2:12345	203.0.113.1:50001
192.168.0.3:23456	203.0.113.1:50002

라우터가 외부로 나갈 때 포트를 다르게 설정하고, 들어오는 응답을 다시 내부 IP로 연결시켜줌.

✅ 요약 비교표
항목	설명
IP	호스트까지 데이터 전달 (비연결, 비신뢰, 포트 미지원)
포트	한 컴퓨터 내 애플리케이션 식별용 숫자
TCP	연결형, 신뢰성 제공, 순서/재전송 보장
UDP	비연결형, 빠르지만 신뢰성 낮음
NAT	내부 IP ↔ 공인 IP 주소 매핑
NAPT	내부 IP:포트 ↔ 공인 IP:포트 매핑 (다중 접속 지원)
