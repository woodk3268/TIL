
# 📚 TIL: 데이터베이스 설계 핵심 정리 (개념적/논리적 설계 중심)

---

## 1️⃣ 개념적 설계 단계: 왜 ‘개체’와 ‘속성’을 추출해야 할까?

* 현실 세계를 모델링하기 위해선 \*\*무엇(개체)\*\*이 있고, 그들이 \*\*무슨 특징(속성)\*\*을 가지는지 파악해야 함
* 예시: ‘고객’, ‘상품’, ‘주문’은 개체 / 고객의 이름, 나이 등은 속성
* 이 단계에서 만든 **E-R 다이어그램은 현실 모델의 구조화된 지도**

---

## 2️⃣ E-R 다이어그램이란?

* **개체(Entity)**, **속성(Attribute)**, \*\*관계(Relationship)\*\*를 그래픽으로 표현
* 현실에서 **어떤 것이 존재하며**, **어떻게 연결되어 있는지**를 한눈에 파악할 수 있게 도와줌

---

## 3️⃣ 논리적 설계: 왜 릴레이션으로 변환하는가?

* DBMS는 현실 개체를 직접 저장하지 못하므로, 이를 \*\*릴레이션(테이블)\*\*로 변환해야 저장·조회·수정 가능
* 모든 개체, 관계는 변환 규칙에 따라 테이블, 컬럼, 제약조건으로 바뀐다

---

## 4️⃣ 릴레이션 변환 규칙 핵심 요약

| 변환 대상   | 변환 결과             | 예시 (한빛마트)                  | 비고           |
| ------- | ----------------- | -------------------------- | ------------ |
| 개체      | 릴레이션              | 고객(고객ID, 이름, …)            | 식별자는 PK      |
| 1\:N 관계 | 외래키 추가            | 상품(제조업체ID FK)              | N쪽 릴레이션에 FK  |
| M\:N 관계 | 릴레이션 생성           | 주문(고객ID FK, 상품ID FK, 수량 등) | 주문 테이블 따로 생성 |
| 1:1 관계  | 외래키 추가 또는 릴레이션 병합 | 사원증(사원ID FK)               | 필수 참여 쪽에 FK  |
| 다중값 속성  | 릴레이션 생성           | 고객전화(고객ID FK, 전화번호)        | 반복 가능 속성 분리  |

---

## 5️⃣ 실전에서 자주 헷갈리는 질문 & 해설

### ❓ 왜 M\:N 관계를 릴레이션으로 따로 만들어야 해?

* 한 릴레이션의 한 튜플에 \*\*두 개 이상의 값(M\:N)\*\*을 직접 저장할 수 없기 때문
* 무결성, 조인 편의성, 정규화 원칙을 위해 별도 릴레이션 필요


### ❓ OrderItem은 왜 복합키(PK: 주문ID + 상품ID)를 쓰는가?

* 단순 ID 하나를 만들 수도 있지만, 해당 항목은 주문과 상품의 조합으로 유일하게 식별되므로 복합키가 논리적으로 더 적절함
* 실무에서는 성능이나 간결성을 이유로 surrogate key를 따로 둘 수도 있음

### ❓ 1:1 관계를 릴레이션 하나로 합치는 기준은?

* 양쪽 모두 필수 참여하고, 속성이 많지 않으면 하나의 릴레이션으로 합치는 것이 낫다
* 예: `회원(회원ID, 이름, 주소)` + `회원상세(회원ID FK, 선호카테고리)` → 병합 가능

---

## 6️⃣ 설계 선택의 기준이 되는 질문들

* 이 개체는 **독립적으로 존재 가능한가?** → 약한 개체 여부 판단
* 이 속성은 **여러 개의 값을 가질 수 있는가?** → 다중값 속성 여부
* 이 관계는 **누가 중심이 되는가?**, **누가 꼭 존재해야 하는가?** → FK 방향 판단
* 이 릴레이션은 **항상 함께 사용되는가?** → 릴레이션 병합 고려

---

## 🔎 핵심 사례 정리: 한빛마트 예시

| 릴레이션 | 설명                                               |
| ---- | ------------------------------------------------ |
| 회원   | 개체 → 릴레이션. 기본 속성들 포함                             |
| 상품   | 제조업체ID FK 포함. 1\:N 관계 반영                         |
| 제조업체 | 개체 그대로 릴레이션                                      |
| 게시글  | 회원ID FK 포함. 게시글-회원 1\:N 관계                       |
| 주문   | 주문ID PK, 회원ID FK, 상품ID FK, 수량 등 포함. M\:N 관계 릴레이션 |

---

## 💡 인사이트 요약

* 릴레이션으로 변환하지 않으면 DB에 저장 불가 → 변환 규칙은 **DB 설계의 필수 과정**
* 1:1 관계, 다중값 속성은 **단순해 보여도 논리적 판단 필요**
* 설계 규칙은 틀이지만, **상황에 따라 유연하게 조정할 수 있는 사고**가 더 중요


